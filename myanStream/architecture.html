<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>myanStream å°ˆæ¡ˆæ¶æ§‹åœ–</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@9.4.3/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .subtitle {
            color: #718096;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .back-button {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .tech-stack {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 40px;
            text-align: center;
        }

        .tech-stack h3 {
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .tech-badges {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .tech-badge {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.95rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 25px;
            background: #e2e8f0;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            color: #2d3748;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .tab:hover:not(.active) {
            background: #cbd5e0;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .diagram-section {
            background: #f7fafc;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .diagram-section h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.8rem;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .diagram-section h3 {
            color: #4a5568;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .mermaid {
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow-x: auto;
            text-align: center;
        }

        pre.mermaid {
            background: white;
            font-family: inherit;
        }

        .info-box {
            background: #edf2f7;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .info-box h4 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .info-box ul {
            margin-left: 20px;
            color: #4a5568;
            line-height: 1.8;
        }

        .info-box code {
            background: #cbd5e0;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .warning-box {
            background: #fff5f5;
            border-left: 4px solid #f56565;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .warning-box h4 {
            color: #c53030;
            margin-bottom: 10px;
        }

        .success-box {
            background: #f0fff4;
            border-left: 4px solid #48bb78;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .success-box h4 {
            color: #2f855a;
            margin-bottom: 10px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
        }

        .feature-card h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feature-card p {
            color: #4a5568;
            line-height: 1.6;
        }

        .feature-card ul {
            margin-left: 20px;
            margin-top: 10px;
            color: #4a5568;
            line-height: 1.6;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e2e8f0;
            color: #4a5568;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: #f7fafc;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .highlight {
            background: #fef5e7;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            color: #d97706;
        }

        .comparison-table {
            margin: 20px 0;
        }

        .comparison-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .pros {
            color: #2f855a;
            font-weight: 600;
        }

        .cons {
            color: #c53030;
            font-weight: 600;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
            color: #718096;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 2rem;
            }

            .tabs {
                flex-direction: column;
            }

            .tab {
                width: 100%;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-button">â† è¿”å›é¦–é </a>

        <div class="header">
            <h1>ğŸ“¡ myanStream æ¶æ§‹è¨­è¨ˆ</h1>
            <p class="subtitle">å¤šå¹³å°ç›´æ’­ä¸²æµè½‰æ¨ç³»çµ± - å®Œæ•´æŠ€è¡“æ¶æ§‹æ–‡ä»¶</p>
        </div>

        <div class="tech-stack">
            <h3>ğŸ› ï¸ æ ¸å¿ƒæŠ€è¡“æ£§</h3>
            <div class="tech-badges">
                <span class="tech-badge">SRS (RTMP Server)</span>
                <span class="tech-badge">FFmpeg</span>
                <span class="tech-badge">Laravel Octane (æ ¸å¿ƒ)</span>
                <span class="tech-badge">Go/Node.js (å³æ™‚å±¤)</span>
                <span class="tech-badge">Redis Streams</span>
                <span class="tech-badge">WebSocket</span>
                <span class="tech-badge">Docker</span>
                <span class="tech-badge">AWS ECS (é¸é…)</span>
                <span class="tech-badge">MySQL</span>
                <span class="tech-badge">Redis</span>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('overview', this)">ç³»çµ±ç¸½è¦½</button>
            <button class="tab" onclick="showTab('backend', this)">å¾Œç«¯æ¶æ§‹åˆ†å±¤</button>
            <button class="tab" onclick="showTab('docker', this)">è‡ªæ¶ Docker</button>
            <button class="tab" onclick="showTab('ecs', this)">AWS ECS</button>
            <button class="tab" onclick="showTab('flow', this)">å®Œæ•´æµç¨‹</button>
            <button class="tab" onclick="showTab('database', this)">è³‡æ–™åº«è¨­è¨ˆ</button>
            <button class="tab" onclick="showTab('system', this)">ç³»çµ±å±¤è¨­è¨ˆ</button>
            <button class="tab" onclick="showTab('comparison', this)">æ–¹æ¡ˆæ¯”è¼ƒ</button>
        </div>

        <!-- ç³»çµ±ç¸½è¦½ Tab -->
        <div id="overview" class="tab-content active">
            <div class="diagram-section">
                <h2>ğŸ¯ ç³»çµ±æ¶æ§‹ç¸½è¦½</h2>

                <div class="info-box">
                    <h4>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ</h4>
                    <ul>
                        <li><strong>ä¸€æ¨å¤šç™¼ï¼š</strong>ä½¿ç”¨è€…åªéœ€æ¨ä¸€è·¯æµåˆ° SRSï¼Œç³»çµ±è‡ªå‹•è½‰æ¨åˆ° YouTubeã€Facebookã€Instagram</li>
                        <li><strong>åˆ†å±¤æ¶æ§‹ï¼š</strong>Laravel Octane è™•ç†æ ¸å¿ƒæ¥­å‹™é‚è¼¯ï¼ˆå•†å“ã€è¨‚å–®ã€é‡‘æµã€ç‰©æµï¼‰ï¼ŒGo/Node.js è™•ç†å³æ™‚å±¤ï¼ˆWebSocketã€å¹³å°æ•´åˆã€è¨Šæ¯åŒ¯æµï¼‰</li>
                        <li><strong>äº‹ä»¶é©…å‹•ï¼š</strong>é€é Event Busï¼ˆRedis Streamsï¼‰è§£è€¦æ ¸å¿ƒå±¤èˆ‡å³æ™‚å±¤ï¼Œç¢ºä¿é«˜å¯ç”¨èˆ‡æ°´å¹³æ“´å±•</li>
                        <li><strong>è·è²¬åˆ†é›¢ï¼š</strong>SRS è™•ç†åª’é«”æµï¼ŒLaravel è™•ç†æ¥­å‹™é‚è¼¯ï¼ŒFFmpeg è² è²¬è½‰æ¨ï¼ŒGo/Node.js è™•ç†å³æ™‚é€šè¨Š</li>
                        <li><strong>æŒ‰éœ€æ“´å……ï¼š</strong>FFmpeg æŒ‰éœ€å•Ÿå‹•ï¼Œæ¯å ´ç›´æ’­ä¸€å€‹åŸ·è¡Œå€‹é«”</li>
                        <li><strong>å¤šæ¸ é“æ”¶å–®ï¼š</strong>æ•´åˆ 12 ç¨®æ”¶å–®æ¸ é“ï¼ˆç›´æ’­èŠå¤©å®¤ã€LINE ç¾¤çµ„ã€FB ç¤¾åœ˜ã€Messengerã€å•†åŸç­‰ï¼‰ï¼Œé€é Polling + WebSocket å³æ™‚æ”¶å–®</li>
                    </ul>
                </div>

                <pre class="mermaid">
graph LR
    A[ä½¿ç”¨è€… App] -->|1. å»ºç«‹ç›´æ’­| B[Laravel API]
    B -->|2. å‘¼å«å¹³å° API| C[YouTube/Facebook/Instagram]
    A -->|3. æ¨ RTMP æµ| D[SRS ä¼ºæœå™¨]
    D -->|4. Webhook é€šçŸ¥| B
    B -->|5. å•Ÿå‹• FFmpeg| E[FFmpeg è½‰æ¨å¼•æ“]
    D -.->|6. æ‹‰æµ| E
    E -->|7. è½‰æ¨ RTMPS| C
    B -->|8. èŠå¤©æ•´åˆ| A
                </pre>

                <h3>ğŸ“Š æ ¸å¿ƒçµ„ä»¶è§’è‰²</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>ğŸ“¡ SRS (åª’é«”ä¼ºæœå™¨)</h4>
                        <p><strong>è§’è‰²ï¼š</strong>åª’é«”äº¤æ›æ©Ÿ</p>
                        <ul>
                            <li>æ¥æ”¶ App çš„ RTMP æ¨æµ</li>
                            <li>è§¸ç™¼ Webhook é€šçŸ¥</li>
                            <li>æä¾›å…§ç¶²æ‹‰æµçµ¦ FFmpeg</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>ğŸ”§ Laravel (æ§åˆ¶ä¸­å¿ƒ)</h4>
                        <p><strong>è§’è‰²ï¼š</strong>æ¥­å‹™é‚è¼¯å±¤</p>
                        <ul>
                            <li>å‘¼å«å¹³å° API å»ºç«‹ç›´æ’­é–“</li>
                            <li>ç®¡ç† stream_key å°æ‡‰é—œä¿‚</li>
                            <li>å•Ÿå‹•/åœæ­¢ FFmpeg</li>
                            <li>æ¬Šé™æ§åˆ¶èˆ‡èŠå¤©æ•´åˆ</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>âš¡ FFmpeg (è½‰æ¨å¼•æ“)</h4>
                        <p><strong>è§’è‰²ï¼š</strong>åª’é«”æµè½‰æ¨å·¥å…·</p>
                        <ul>
                            <li>å¾ SRS æ‹‰å– RTMP æµ</li>
                            <li>è½‰æ¨åˆ°å„å¹³å° RTMPS</li>
                            <li>æ¯å ´ç›´æ’­ç¨ç«‹åŸ·è¡Œå€‹é«”</li>
                        </ul>
                    </div>
                </div>

                <div class="success-box">
                    <h4>âœ… æ¶æ§‹å„ªå‹¢</h4>
                    <ul>
                        <li><strong>ç¯€çœé »å¯¬ï¼š</strong>App åªéœ€ä¸Šå‚³ä¸€è·¯æµï¼Œç”±ä¼ºæœå™¨ç«¯è½‰æ¨åˆ°å¤šå€‹å¹³å°</li>
                        <li><strong>é«˜å¯ç”¨æ€§ï¼š</strong>çµ„ä»¶ç¨ç«‹éƒ¨ç½²ï¼Œå–®ä¸€å¹³å°å¤±æ•—ä¸å½±éŸ¿å…¶ä»–å¹³å°</li>
                        <li><strong>æ˜“æ“´å……ï¼š</strong>æ–°å¢ç¬¬å››ã€ç¬¬äº”å€‹å¹³å°åªéœ€ä¿®æ”¹è¨­å®š</li>
                        <li><strong>æˆæœ¬æœ€ä½³åŒ–ï¼š</strong>FFmpeg æŒ‰éœ€å•Ÿå‹•ï¼Œä½¿ç”¨å®Œå³åœæ­¢</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- å¾Œç«¯æ¶æ§‹åˆ†å±¤ Tab -->
        <div id="backend" class="tab-content">
            <div class="diagram-section">
                <h2>ğŸ—ï¸ å¾Œç«¯æ¶æ§‹åˆ†å±¤è¨­è¨ˆ</h2>

                <div class="warning-box">
                    <h4>âš ï¸ ç‚ºä»€éº¼è¦åˆ†å±¤ï¼Ÿå–®ä¸€æ¡†æ¶å…¨åŒ…ä¸è¡Œå—ï¼Ÿ</h4>
                    <p><strong>ç›´æ’­é›»å•†ç³»çµ±çš„ç‰¹æ€§ï¼š</strong></p>
                    <ul>
                        <li>âœ… æ ¸å¿ƒäº¤æ˜“é‚è¼¯è¤‡é›œï¼ˆå•†å“ã€è¨‚å–®ã€é‡‘æµã€ç‰©æµã€æœƒå“¡ã€æ¬Šé™ã€å ±è¡¨ï¼‰</li>
                        <li>âœ… å³æ™‚æ€§è¦æ±‚é«˜ï¼ˆç•™è¨€æ”¶å–®ã€WebSocket æ¨é€ã€å¤šå¹³å°è¨Šæ¯åŒ¯æµï¼‰</li>
                        <li>âœ… IO å¯†é›†ï¼ˆå¤šå¹³å° API è¼ªè©¢ã€é•·é€£ç·šï¼‰</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>å–®ä¸€æ¡†æ¶å…¨åŒ…çš„å•é¡Œï¼š</strong></p>
                    <ul>
                        <li>âŒ Laravel è™•ç†é•·é€£ç·š/WebSocket ä¸æ˜¯å¼·é …ï¼ˆæ•ˆèƒ½ç“¶é ¸ï¼‰</li>
                        <li>âŒ Go/Node.js è™•ç†è¤‡é›œå•†å‹™é‚è¼¯ã€ORMã€æ¬Šé™ä¸å¦‚æˆç†Ÿ Web æ¡†æ¶</li>
                        <li>âŒ æ··åœ¨ä¸€èµ·é›£ä»¥æ°´å¹³æ“´å±•ï¼ˆäº¤æ˜“å±¤å’Œå³æ™‚å±¤çš„æ“´å±•éœ€æ±‚ä¸åŒï¼‰</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>åˆ†å±¤æ¶æ§‹çš„å„ªå‹¢ï¼š</strong></p>
                    <ul>
                        <li>âœ… å„å±¤ä½¿ç”¨æœ€é©åˆçš„æŠ€è¡“æ£§ï¼ˆLaravel åšå®ƒæ“…é•·çš„ï¼ŒGo/Node.js åšå®ƒæ“…é•·çš„ï¼‰</li>
                        <li>âœ… ç¨ç«‹æ“´å±•ï¼ˆå³æ™‚å±¤éœ€è¦æ›´å¤šå¯¦ä¾‹ï¼Œäº¤æ˜“å±¤å¯èƒ½ä¸éœ€è¦ï¼‰</li>
                        <li>âœ… è·è²¬æ¸…æ™°ã€æ˜“ç¶­è­·ï¼ˆæ ¸å¿ƒé‚è¼¯è®Šæ›´ä¸å½±éŸ¿å³æ™‚å±¤ï¼‰</li>
                    </ul>
                </div>

                <h3>ğŸ¯ æ¶æ§‹åˆ†å±¤ç¸½è¦½</h3>
                <pre class="mermaid">
graph TB
    subgraph clients["ğŸ“± å®¢æˆ¶ç«¯å±¤"]
        APP[ä½¿ç”¨è€… App<br/>React Native / Flutter]
        ADMIN[é‹ç‡Ÿå¾Œå°<br/>React Admin]
    end

    subgraph realtime["âš¡ å³æ™‚/æ•´åˆå±¤ï¼ˆGo/Node.jsï¼‰"]
        WS[WebSocket Server<br/>é•·é€£ç·šç®¡ç†]
        CONN[Platform Connectors<br/>FB/YouTube/LINE API Polling]
        AGG[Message Aggregator<br/>è¨Šæ¯åŒ¯æµå¼•æ“]
    end

    subgraph eventbus["ğŸ”„ äº‹ä»¶åŒ¯æµæ’"]
        REDIS[Redis Streams<br/>Event Bus]
    end

    subgraph core["ğŸ¢ æ ¸å¿ƒäº¤æ˜“å±¤ï¼ˆLaravel Octaneï¼‰"]
        OMS[è¨‚å–®ç®¡ç† OMS]
        PROD[å•†å“/åº«å­˜]
        PAY[é‡‘æµæ•´åˆ]
        SHIP[ç‰©æµæ•´åˆ]
        CRM[æœƒå“¡ CRM]
        RBAC[æ¬Šé™ç®¡ç† RBAC]
        RPT[å ±è¡¨/åˆ†æ]
    end

    subgraph data["ğŸ—„ï¸ è³‡æ–™å±¤"]
        MYSQL[(MySQL 8.0<br/>æ ¸å¿ƒè³‡æ–™åº«)]
        REDISDB[(Redis<br/>å¿«å–/Session)]
        S3[(S3/OSS<br/>æª”æ¡ˆå„²å­˜)]
    end

    APP -->|WebSocket| WS
    APP -->|HTTPS API| OMS
    ADMIN -->|HTTPS API| OMS

    CONN -->|è¼ªè©¢å¹³å° API| PLATFORMS[ç¬¬ä¸‰æ–¹å¹³å°]
    CONN -->|ç™¼å¸ƒäº‹ä»¶| REDIS
    WS -->|è¨‚é–±äº‹ä»¶| REDIS
    REDIS -->|æ¶ˆè²»äº‹ä»¶| OMS

    OMS --> MYSQL
    OMS --> REDISDB
    PROD --> MYSQL
    CRM --> MYSQL
    RPT --> MYSQL

    WS -.->|æ¨é€è¨Šæ¯| APP

    classDef clientStyle fill:#bbdefb,stroke:#1976d2,stroke-width:2px
    classDef realtimeStyle fill:#c8e6c9,stroke:#388e3c,stroke-width:2px
    classDef eventStyle fill:#fff9c4,stroke:#f57c00,stroke-width:2px
    classDef coreStyle fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px
    classDef dataStyle fill:#ffccbc,stroke:#d84315,stroke-width:2px

    class APP,ADMIN clientStyle
    class WS,CONN,AGG realtimeStyle
    class REDIS eventStyle
    class OMS,PROD,PAY,SHIP,CRM,RBAC,RPT coreStyle
    class MYSQL,REDISDB,S3 dataStyle
                </pre>

                <h3>ğŸ“Š å„å±¤è·è²¬æ¸…å–®</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>âš¡ å³æ™‚/æ•´åˆå±¤ï¼ˆGo/Node.jsï¼‰</h4>
                        <p><strong>æŠ€è¡“é¸æ“‡ï¼š</strong>Go (é«˜æ•ˆèƒ½) æˆ– Node.js (ç”Ÿæ…‹è±å¯Œ)</p>
                        <ul>
                            <li>WebSocket Serverï¼ˆé•·é€£ç·šç®¡ç†ï¼‰</li>
                            <li>å¹³å° API Pollingï¼ˆFB/YouTube/LINEï¼‰</li>
                            <li>è¨Šæ¯åŒ¯æµèˆ‡åˆ†ç™¼</li>
                            <li>å³æ™‚é€šçŸ¥æ¨é€</li>
                            <li>Event Bus ç”Ÿç”¢è€…/æ¶ˆè²»è€…</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>ğŸ¢ æ ¸å¿ƒäº¤æ˜“å±¤ï¼ˆLaravel Octaneï¼‰</h4>
                        <p><strong>æŠ€è¡“é¸æ“‡ï¼š</strong>Laravel 12 + Octane (Swoole)</p>
                        <ul>
                            <li>å•†å“ç®¡ç†ï¼ˆSPU/SKUã€åº«å­˜ã€åƒ¹æ ¼ï¼‰</li>
                            <li>è¨‚å–®ç®¡ç† OMSï¼ˆæ”¶å–®æ± ã€è¨‚å–®ã€å€™è£œå–®ï¼‰</li>
                            <li>é‡‘æµæ•´åˆï¼ˆè—æ–°ã€ç¶ ç•Œã€Stripeï¼‰</li>
                            <li>ç‰©æµæ•´åˆï¼ˆé»‘è²“ã€æ–°ç«¹ã€è¶…å•†å–è²¨ï¼‰</li>
                            <li>æœƒå“¡ CRMï¼ˆæœƒå“¡ã€æ¨™ç±¤ã€åˆ†ç¾¤ï¼‰</li>
                            <li>æ¬Šé™ç®¡ç† RBAC</li>
                            <li>å ±è¡¨èˆ‡æ•¸æ“šåˆ†æ</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>ğŸ”„ Event Busï¼ˆRedis Streamsï¼‰</h4>
                        <p><strong>æŠ€è¡“é¸æ“‡ï¼š</strong>Redis Streams â†’ RabbitMQ â†’ Kafka</p>
                        <ul>
                            <li>è§£è€¦æ ¸å¿ƒå±¤èˆ‡å³æ™‚å±¤</li>
                            <li>éåŒæ­¥äº‹ä»¶è™•ç†</li>
                            <li>è¨Šæ¯æŒä¹…åŒ–èˆ‡é‡è©¦</li>
                            <li>æ°´å¹³æ“´å±•æ”¯æ´</li>
                        </ul>
                        <p style="margin-top: 10px; font-size: 0.9em; opacity: 0.9;">
                            <strong>é¸å‹ç­–ç•¥ï¼š</strong><br/>
                            åˆæœŸç”¨ Redis Streamsï¼ˆç°¡å–®ã€ä½æˆæœ¬ï¼‰<br/>
                            æˆé•·æœŸç”¨ RabbitMQï¼ˆåŠŸèƒ½å®Œæ•´ã€æ˜“ç¶­è­·ï¼‰<br/>
                            å¤§è¦æ¨¡ç”¨ Kafkaï¼ˆé«˜ååã€åˆ†æ•£å¼ï¼‰
                        </p>
                    </div>
                </div>

                <h3>ğŸ”„ äº‹ä»¶é©…å‹•æµç¨‹ç¯„ä¾‹ï¼šFB ç•™è¨€æ”¶å–®</h3>
                <pre class="mermaid">
sequenceDiagram
    participant FB as Facebook Live
    participant CONN as Connector<br/>(Go/Node.js)
    participant BUS as Event Bus<br/>(Redis Streams)
    participant CORE as Laravel Core
    participant WS as WebSocket Server
    participant APP as ä½¿ç”¨è€… App

    loop æ¯ 2-5 ç§’
        CONN->>FB: Polling API æ‹‰å–ç•™è¨€
        FB-->>CONN: æ–°ç•™è¨€è³‡æ–™
    end

    CONN->>BUS: ç™¼å¸ƒäº‹ä»¶ï¼šNewCommentEvent
    BUS->>CORE: æ¶ˆè²»äº‹ä»¶
    CORE->>CORE: è§£æç•™è¨€ã€æ¯”å°å•†å“ã€å»ºç«‹æš«å­˜å–®
    CORE->>BUS: ç™¼å¸ƒäº‹ä»¶ï¼šOrderCreatedEvent
    BUS->>WS: æ¶ˆè²»äº‹ä»¶
    WS->>APP: WebSocket æ¨é€é€šçŸ¥
                </pre>

                <h3>ğŸ’¡ æŠ€è¡“é¸å‹ç†ç”±</h3>
                <div class="info-box">
                    <h4>ğŸ¤” ç‚ºä»€éº¼æ ¸å¿ƒå±¤é¸ Laravelï¼Ÿ</h4>
                    <ul>
                        <li><strong>ORM æˆç†Ÿï¼š</strong>Eloquent è™•ç†è¤‡é›œé—œè¯æŸ¥è©¢ã€äº‹å‹™ç®¡ç†éå¸¸æ–¹ä¾¿</li>
                        <li><strong>ç”Ÿæ…‹è±å¯Œï¼š</strong>é‡‘æµã€ç‰©æµã€ç¬¬ä¸‰æ–¹ API SDK å®Œæ•´</li>
                        <li><strong>æ¬Šé™ç®¡ç†ï¼š</strong>Laravel å…§å»º Policyã€Gateï¼ŒRBAC å¯¦ç¾å®¹æ˜“</li>
                        <li><strong>é–‹ç™¼æ•ˆç‡ï¼š</strong>å•†å‹™é‚è¼¯è®Šæ›´é »ç¹ï¼ŒLaravel é–‹ç™¼é€Ÿåº¦å¿«</li>
                        <li><strong>Octane åŠ æŒï¼š</strong>çµåˆ Swoole/RoadRunnerï¼Œæ•ˆèƒ½å¤§å¹…æå‡</li>
                    </ul>
                </div>

                <div class="info-box">
                    <h4>ğŸ¤” ç‚ºä»€éº¼å³æ™‚å±¤é¸ Go/Node.jsï¼Ÿ</h4>
                    <p><strong>Go çš„å„ªå‹¢ï¼š</strong></p>
                    <ul>
                        <li>åŸç”Ÿ Goroutineï¼Œè™•ç†é«˜ä¸¦ç™¼é•·é€£ç·šæ•ˆèƒ½å„ªç•°</li>
                        <li>è¨˜æ†¶é«”ä½”ç”¨ä½ï¼ˆé©åˆå¤§é‡ WebSocket é€£ç·šï¼‰</li>
                        <li>ç·¨è­¯å‹èªè¨€ï¼Œéƒ¨ç½²ç°¡å–®ï¼ˆå–®ä¸€åŸ·è¡Œæª”ï¼‰</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>Node.js çš„å„ªå‹¢ï¼š</strong></p>
                    <ul>
                        <li>ç”Ÿæ…‹è±å¯Œï¼ˆå„å¹³å° API SDK é½Šå…¨ï¼‰</li>
                        <li>é–‹ç™¼é€Ÿåº¦å¿«ï¼ˆTypeScript æ”¯æ´ä½³ï¼‰</li>
                        <li>åœ˜éšŠç†Ÿæ‚‰åº¦ï¼ˆå¦‚æœå‰ç«¯åœ˜éšŠç”¨ Reactï¼‰</li>
                    </ul>
                    <p style="margin-top: 15px; font-size: 0.95em; color: #667eea;">
                        <strong>ğŸ’¡ å»ºè­°ï¼š</strong>å¦‚æœåœ˜éšŠç†Ÿæ‚‰ Go ä¸”è¿½æ±‚æ¥µè‡´æ•ˆèƒ½ï¼Œé¸ Goï¼›å¦‚æœè¿½æ±‚é–‹ç™¼é€Ÿåº¦èˆ‡ç”Ÿæ…‹ï¼Œé¸ Node.jsï¼ˆå…©è€…éƒ½å¯ä»¥ï¼‰
                    </p>
                </div>

                <h3>ğŸ”Œ é€šè¨Šæ¨¡å¼</h3>
                <table>
                    <thead>
                        <tr>
                            <th>é€šè¨Šå ´æ™¯</th>
                            <th>é€šè¨Šæ–¹å¼</th>
                            <th>èªªæ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>å³æ™‚å±¤ â†’ æ ¸å¿ƒå±¤</strong></td>
                            <td>Event Busï¼ˆéåŒæ­¥ï¼‰</td>
                            <td>æ–°ç•™è¨€ã€æ–°è¨‚å–®ç­‰äº‹ä»¶é€é Redis Streams ç™¼å¸ƒ</td>
                        </tr>
                        <tr>
                            <td><strong>æ ¸å¿ƒå±¤ â†’ å³æ™‚å±¤</strong></td>
                            <td>Event Busï¼ˆéåŒæ­¥ï¼‰</td>
                            <td>è¨‚å–®ç‹€æ…‹è®Šæ›´ã€åº«å­˜æ›´æ–°ç­‰äº‹ä»¶ç™¼å¸ƒçµ¦ WebSocket Server</td>
                        </tr>
                        <tr>
                            <td><strong>å³æ™‚å±¤ â†’ å¹³å° API</strong></td>
                            <td>HTTP Pollingï¼ˆ2-5 ç§’ï¼‰</td>
                            <td>ä¸»å‹•æ‹‰å– FB/YouTube/LINE èŠå¤©å®¤è¨Šæ¯</td>
                        </tr>
                        <tr>
                            <td><strong>æ ¸å¿ƒå±¤ â†’ å¹³å° API</strong></td>
                            <td>HTTP REST API</td>
                            <td>å»ºç«‹ç›´æ’­é–“ã€ç™¼é€é€šçŸ¥ç­‰æ“ä½œ</td>
                        </tr>
                        <tr>
                            <td><strong>å³æ™‚å±¤ â†’ App</strong></td>
                            <td>WebSocketï¼ˆé•·é€£ç·šï¼‰</td>
                            <td>å³æ™‚æ¨é€ç•™è¨€ã€è¨‚å–®é€šçŸ¥ã€åº«å­˜è®Šå‹•</td>
                        </tr>
                        <tr>
                            <td><strong>App/å¾Œå° â†’ æ ¸å¿ƒå±¤</strong></td>
                            <td>HTTPS REST API</td>
                            <td>CRUD æ“ä½œã€æŸ¥è©¢å ±è¡¨</td>
                        </tr>
                    </tbody>
                </table>

                <div class="success-box">
                    <h4>âœ… åˆ†å±¤æ¶æ§‹çš„å¥½è™•</h4>
                    <ul>
                        <li><strong>æŠ€è¡“é©é…ï¼š</strong>Laravel åšè¤‡é›œå•†å‹™é‚è¼¯ï¼ŒGo/Node.js åšé«˜ä¸¦ç™¼å³æ™‚é€šè¨Šï¼Œå„å¸å…¶è·</li>
                        <li><strong>ç¨ç«‹æ“´å±•ï¼š</strong>å³æ™‚å±¤å¯ä»¥é–‹ 10 å€‹å¯¦ä¾‹è™•ç† WebSocketï¼Œæ ¸å¿ƒå±¤åªéœ€ 2-3 å€‹å¯¦ä¾‹</li>
                        <li><strong>æ•…éšœéš”é›¢ï¼š</strong>å³æ™‚å±¤æ›æ‰ä¸å½±éŸ¿æ ¸å¿ƒæ¥­å‹™ï¼ˆè¨‚å–®ä»å¯å¾å¾Œå°å»ºç«‹ï¼‰</li>
                        <li><strong>æ˜“æ–¼æ¸¬è©¦ï¼š</strong>æ ¸å¿ƒé‚è¼¯èˆ‡å³æ™‚é‚è¼¯åˆ†é›¢ï¼Œå–®å…ƒæ¸¬è©¦æ›´å®¹æ˜“</li>
                        <li><strong>åœ˜éšŠå”ä½œï¼š</strong>å‰ç«¯åœ˜éšŠå¯ä»¥ç¶­è­· Node.js å³æ™‚å±¤ï¼Œå¾Œç«¯åœ˜éšŠç¶­è­· Laravel æ ¸å¿ƒå±¤</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- è‡ªæ¶ Docker Tab -->
        <div id="docker" class="tab-content">
            <div class="diagram-section">
                <h2>ğŸ³ è‡ªæ¶ Docker ç‰ˆæœ¬æ¶æ§‹</h2>

                <div class="info-box">
                    <h4>ğŸ’° é©åˆå ´æ™¯</h4>
                    <ul>
                        <li><strong>åˆæœŸé–‹ç™¼/æ¸¬è©¦ï¼š</strong>æˆæœ¬è¼ƒä½ï¼Œå¿«é€Ÿé©—è­‰åŠŸèƒ½</li>
                        <li><strong>ä¸­å°è¦æ¨¡ï¼š</strong>åŒæ™‚åœ¨ç·šç›´æ’­æ•¸ < 50 å ´</li>
                        <li><strong>å›ºå®šæµé‡ï¼š</strong>ä¸éœ€è¦é »ç¹å½ˆæ€§æ“´å……</li>
                        <li><strong>è‡ªæœ‰ä¸»æ©Ÿï¼š</strong>å·²æœ‰ VPS æˆ–å¯¦é«”æ©Ÿå™¨</li>
                    </ul>
                </div>

                <h3>ğŸ—ï¸ éƒ¨ç½²æ¶æ§‹åœ–</h3>
                <pre class="mermaid">
graph TB
    subgraph client["ğŸ“± å®¢æˆ¶ç«¯"]
        A[ä½¿ç”¨è€… App]
    end

    subgraph docker["ğŸ³ Docker Compose ç’°å¢ƒ"]
        B[SRS å®¹å™¨<br/>Port: 1935, 1985]
        C[Laravel Octane<br/>Port: 8000]
        D[Queue Worker]
        E[FFmpeg å®¹å™¨ 1]
        F[FFmpeg å®¹å™¨ 2]
        I[(MySQL 8.0)]
        J[(Redis)]
    end

    subgraph platforms["ğŸŒ ç›´æ’­å¹³å°"]
        G[YouTube Live]
        H[Facebook Live]
    end

    A -->|RTMP æ¨æµ| B
    A -->|HTTP API| C
    B -.->|Webhook| C
    C --> D
    D -->|å•Ÿå‹•| E
    D -->|å•Ÿå‹•| F
    B -.->|æ‹‰æµ| E
    B -.->|æ‹‰æµ| F
    E -->|RTMPS| G
    F -->|RTMPS| H
    C --> I
    C --> J

    classDef clientStyle fill:#bbdefb,stroke:#1976d2,stroke-width:2px
    classDef containerStyle fill:#fff9c4,stroke:#f57c00,stroke-width:2px
    classDef workerStyle fill:#c8e6c9,stroke:#388e3c,stroke-width:2px
    classDef dbStyle fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px
    classDef platformStyle fill:#ffccbc,stroke:#d84315,stroke-width:2px

    class A clientStyle
    class B,C containerStyle
    class D,E,F workerStyle
    class I,J dbStyle
    class G,H platformStyle
                </pre>

                <h3>ğŸ“‹ å¾ã€Œé–‹å§‹ç›´æ’­ã€åˆ°ã€ŒçµæŸã€çš„å®Œæ•´æµç¨‹</h3>

                <pre class="code-block">
<strong>Phase 1: ä½¿ç”¨è€…é»æ“Šã€Œé–‹å§‹ç›´æ’­ã€</strong>

1. App â†’ Laravel API
   POST /api/live/sessions

2. Laravel è™•ç†
   - å‘¼å« YouTube API å»ºç«‹ç›´æ’­é–“
   - å‘¼å« Facebook API å»ºç«‹ç›´æ’­é–“
   - ç”Ÿæˆå…§éƒ¨ stream_key: user123_abc456
   - å¯«å…¥è³‡æ–™åº«

3. å›å‚³çµ¦ App
   rtmp_url: rtmp://yourdomain.com/live/user123_abc456

<strong>Phase 2: App é–‹å§‹æ¨æµ</strong>

4. App æ¨æµåˆ° SRS

5. SRS è§¸ç™¼ on_publish Webhook

6. Laravel Webhook Handler
   - é©—è­‰ stream_key
   - dispatch(StartRestreamJob)
   - å›å‚³ 200 OK

<strong>Phase 3: Queue Worker å•Ÿå‹• FFmpeg</strong>

7. Queue Worker åŸ·è¡Œ StartRestreamJob
   - Redis Lock é˜²æ­¢ä¸¦ç™¼
   - å•Ÿå‹• FFmpeg å®¹å™¨

   docker run -d --name ffmpeg_session_123
     --network myanstream
     jrottenberg/ffmpeg:latest
     -re -i rtmp://srs:1935/live/user123_abc456
     -c:v copy -c:a copy
     -f flv rtmps://a.rtmp.youtube.com/live2/yt_key

<strong>Phase 4: ç›´æ’­é€²è¡Œä¸­</strong>

8. Monitor æ’ç¨‹ (æ¯ 30 ç§’)
   - æª¢æŸ¥ FFmpeg å®¹å™¨æ˜¯å¦å­˜æ´»
   - å¦‚æœç•°å¸¸ â†’ å˜—è©¦é‡å•Ÿ

9. èŠå¤©æ•´åˆ (WebSocket)
   - Laravel Job è¼ªè©¢å¹³å°èŠå¤© API
   - é€é WebSocket æ¨é€çµ¦ App

<strong>Phase 5: ç›´æ’­çµæŸ</strong>

10. App åœæ­¢æ¨æµ

11. SRS è§¸ç™¼ on_unpublish

12. Laravel è™•ç†çµæŸ
    - åœæ­¢ FFmpeg å®¹å™¨
    - æ›´æ–°è³‡æ–™åº« status = ENDED
                </pre>

                <h3>ğŸ”§ Docker Compose è¨­å®šæª”ç¯„ä¾‹</h3>
                <pre class="code-block">version: '3.8'

services:
  srs:
    image: ossrs/srs:5
    ports:
      - "1935:1935"
      - "1985:1985"
    environment:
      - SRS_HTTP_API_ENABLED=on
      - SRS_HTTP_HOOKS_ENABLED=on
    networks:
      - myanstream

  laravel:
    build: ./laravel
    ports:
      - "8000:8000"
    environment:
      - APP_ENV=production
      - DB_HOST=mysql
    volumes:
      - ./laravel:/var/www/html
    networks:
      - myanstream

  worker:
    build: ./laravel
    command: php artisan queue:work
    volumes:
      - ./laravel:/var/www/html
      - /var/run/docker.sock:/var/run/docker.sock
    networks:
      - myanstream

  mysql:
    image: mysql:8.0
    environment:
      - MYSQL_DATABASE=myanstream
    volumes:
      - mysql_data:/var/lib/mysql
    networks:
      - myanstream

  redis:
    image: redis:7-alpine
    networks:
      - myanstream

networks:
  myanstream:

volumes:
  mysql_data:
                </pre>

                <h3>âš™ï¸ é—œéµè¨­è¨ˆåŸå‰‡</h3>
                <div class="success-box">
                    <h4>âœ… FFmpeg ä¸è¦è·Ÿ Octane Request ç¶ä¸€èµ·</h4>
                    <ul>
                        <li><strong>éŒ¯èª¤åšæ³•ï¼š</strong>åœ¨ Webhook Handler å…§ç›´æ¥å•Ÿå‹• FFmpeg ä¸¦ç­‰å¾… (æœƒé˜»å¡ HTTP å›æ‡‰)</li>
                        <li><strong>æ­£ç¢ºåšæ³•ï¼š</strong>Webhook Handler å¿«é€Ÿé©—è­‰ â†’ ä¸Ÿ Job â†’ ç«‹å³å›å‚³ 200 OK</li>
                        <li><strong>ç¨ç«‹ Workerï¼š</strong>ç”¨ç¨ç«‹çš„ Queue Worker æˆ–ç¨ç«‹å®¹å™¨è™•ç† FFmpeg å•Ÿå‹•</li>
                        <li><strong>ç‹€æ…‹è¿½è¹¤ï¼š</strong>æ‰€æœ‰å®¹å™¨ IDã€PID éƒ½å¯«å…¥è³‡æ–™åº«/Redis</li>
                    </ul>
                </div>

                <div class="warning-box">
                    <h4>âš ï¸ è‡ªæ¶ç‰ˆæœ¬çš„é™åˆ¶</h4>
                    <ul>
                        <li><strong>å–®é»æ•…éšœï¼š</strong>ä¸»æ©Ÿæ›æ‰ï¼Œæ‰€æœ‰ç›´æ’­ä¸­æ–·</li>
                        <li><strong>æ“´å……æ€§æœ‰é™ï¼š</strong>å‚ç›´æ“´å……å—é™æ–¼å–®æ©Ÿç¡¬é«”</li>
                        <li><strong>éœ€è¦æ‰‹å‹•ç¶­è­·ï¼š</strong>ç³»çµ±æ›´æ–°ã€å‚™ä»½ã€ç›£æ§éƒ½éœ€è‡ªè¡Œè™•ç†</li>
                        <li><strong>é »å¯¬æˆæœ¬ï¼š</strong>å¤§é‡ä¸¦ç™¼æ™‚é »å¯¬æˆæœ¬å¯èƒ½å¾ˆé«˜</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- AWS ECS Tab -->
        <div id="ecs" class="tab-content">
            <div class="diagram-section">
                <h2>â˜ï¸ AWS ECS é›²ç«¯ç‰ˆæœ¬æ¶æ§‹</h2>

                <div class="info-box">
                    <h4>ğŸš€ é©åˆå ´æ™¯</h4>
                    <ul>
                        <li><strong>ç”Ÿç”¢ç’°å¢ƒï¼š</strong>éœ€è¦é«˜å¯ç”¨æ€§èˆ‡è‡ªå‹•å®¹éŒ¯ç§»è½‰</li>
                        <li><strong>å¤§è¦æ¨¡ï¼š</strong>åŒæ™‚åœ¨ç·šç›´æ’­æ•¸ > 50 å ´</li>
                        <li><strong>å½ˆæ€§æ“´å……ï¼š</strong>æµé‡æ³¢å‹•å¤§ï¼Œéœ€è¦è‡ªå‹•æ“´å……ç¸®æ¸›</li>
                        <li><strong>å…¨çƒæœå‹™ï¼š</strong>éœ€è¦å¤šå€åŸŸéƒ¨ç½²</li>
                    </ul>
                </div>

                <h3>ğŸ—ï¸ ECS éƒ¨ç½²æ¶æ§‹</h3>
                <pre class="mermaid">
graph TB
    subgraph client["ğŸ“± å®¢æˆ¶ç«¯"]
        A[ä½¿ç”¨è€… App]
    end

    subgraph lb["âš–ï¸ AWS è² è¼‰å¹³è¡¡å™¨"]
        B[NLB<br/>Network Load Balancer<br/>TCP 1935]
        C[ALB<br/>Application Load Balancer<br/>HTTP/S]
    end

    subgraph ecs["â˜ï¸ AWS ECS Fargate"]
        D[SRS Service<br/>1-3 Tasks<br/>2 vCPU / 4GB]
        E[Laravel Octane Service<br/>2-10 Tasks Auto Scale<br/>1 vCPU / 2GB]
        F[FFmpeg Task 1<br/>æŒ‰éœ€å•Ÿå‹•<br/>2 vCPU / 4GB]
        G[FFmpeg Task 2<br/>æŒ‰éœ€å•Ÿå‹•<br/>2 vCPU / 4GB]
    end

    subgraph aws["ğŸ—„ï¸ AWS è¨—ç®¡æœå‹™"]
        H[(RDS MySQL)]
        I[(ElastiCache Redis)]
    end

    subgraph platforms["ğŸŒ ç›´æ’­å¹³å°"]
        J[YouTube Live]
        K[Facebook Live]
    end

    A -->|RTMP| B
    A -->|HTTPS| C
    B --> D
    C --> E
    E -.->|RunTask| F
    E -.->|RunTask| G
    D -.->|Webhook| E
    D -.->|æ‹‰æµ| F
    D -.->|æ‹‰æµ| G
    E --> H
    E --> I
    F -->|RTMPS| J
    G -->|RTMPS| K

    classDef clientStyle fill:#bbdefb,stroke:#1976d2,stroke-width:2px
    classDef lbStyle fill:#fff9c4,stroke:#f57c00,stroke-width:2px
    classDef ecsStyle fill:#c8e6c9,stroke:#388e3c,stroke-width:2px
    classDef awsStyle fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px
    classDef platformStyle fill:#ffccbc,stroke:#d84315,stroke-width:2px

    class A clientStyle
    class B,C lbStyle
    class D,E,F,G ecsStyle
    class H,I awsStyle
    class J,K platformStyle
                </pre>

                <h3>ğŸ“‹ ECS çµ„ä»¶é…ç½®</h3>
                <table>
                    <thead>
                        <tr>
                            <th>çµ„ä»¶</th>
                            <th>é¡å‹</th>
                            <th>åŸ·è¡Œå€‹é«”æ•¸</th>
                            <th>CPU/RAM</th>
                            <th>è² è¼‰å¹³è¡¡å™¨</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>SRS Server</strong></td>
                            <td>ECS Service</td>
                            <td>1-3 (å›ºå®š)</td>
                            <td>2048 / 4GB</td>
                            <td>NLB (TCP)</td>
                        </tr>
                        <tr>
                            <td><strong>Laravel Octane</strong></td>
                            <td>ECS Service</td>
                            <td>2-10 (Auto Scale)</td>
                            <td>1024 / 2GB</td>
                            <td>ALB (HTTP/S)</td>
                        </tr>
                        <tr>
                            <td><strong>FFmpeg</strong></td>
                            <td>ECS Task (æŒ‰éœ€)</td>
                            <td>å‹•æ…‹ (æ¯å ´ç›´æ’­ 1 å€‹)</td>
                            <td>2048 / 4GB</td>
                            <td>ç„¡</td>
                        </tr>
                    </tbody>
                </table>

                <h3>ğŸ”’ Security Groups è¨­å®š</h3>
                <pre class="code-block">SG-SRS (SRS Tasks):
  Inbound:  é€£æ¥åŸ  1935 from NLB
            é€£æ¥åŸ  1935 from SG-FFmpeg
            é€£æ¥åŸ  1985 from SG-Laravel
  Outbound: é€£æ¥åŸ  8000 to SG-Laravel

SG-Laravel (Laravel Tasks):
  Inbound:  é€£æ¥åŸ  8000 from ALB
            é€£æ¥åŸ  8000 from SG-SRS
  Outbound: é€£æ¥åŸ  443 to 0.0.0.0/0
            é€£æ¥åŸ  3306 to SG-RDS
            é€£æ¥åŸ  6379 to SG-Redis

SG-FFmpeg (FFmpeg Tasks):
  Inbound:  ç„¡
  Outbound: é€£æ¥åŸ  1935 to SG-SRS
            é€£æ¥åŸ  443 to 0.0.0.0/0
                </pre>

                <h3>ğŸ“ˆ Auto Scaling ç­–ç•¥</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>Laravel Octane</h4>
                        <p><strong>æŒ‡æ¨™ï¼š</strong>CPU ä½¿ç”¨ç‡</p>
                        <p><strong>ç›®æ¨™å€¼ï¼š</strong>70%</p>
                        <p><strong>ç¯„åœï¼š</strong>2-10 Tasks</p>
                    </div>

                    <div class="feature-card">
                        <h4>SRS Server</h4>
                        <p><strong>ç­–ç•¥ï¼š</strong>å›ºå®šæ•¸é‡ï¼Œä¸å»ºè­° Auto Scaling</p>
                        <p><strong>åŸå› ï¼š</strong>é¿å…æ¨æµä¸­æ–·</p>
                    </div>

                    <div class="feature-card">
                        <h4>FFmpeg Tasks</h4>
                        <p><strong>ç­–ç•¥ï¼š</strong>æŒ‰éœ€å•Ÿå‹• (RunTask)</p>
                        <p><strong>æ•¸é‡ï¼š</strong>= ç•¶å‰ç›´æ’­å ´æ¬¡</p>
                    </div>
                </div>

                <div class="warning-box">
                    <h4>âš ï¸ é‡è¦ï¼šSRS çš„ Sticky Session å•é¡Œ</h4>
                    <ul>
                        <li><strong>å•é¡Œï¼š</strong>RTMP æ˜¯æœ‰ç‹€æ…‹é€£ç·šï¼Œæ¨æµéç¨‹ä¸èƒ½åˆ‡æ›å¾Œç«¯ SRS åŸ·è¡Œå€‹é«”</li>
                        <li><strong>è§£æ±ºæ–¹æ¡ˆ Aï¼š</strong>NLB + Source IP Hash (åŒä¸€ IP è·¯ç”±åˆ°åŒä¸€ SRS)</li>
                        <li><strong>è§£æ±ºæ–¹æ¡ˆ Bï¼š</strong>æ¯å€‹ Stream ç¶å®šç‰¹å®š SRS ç¯€é»</li>
                        <li><strong>è§£æ±ºæ–¹æ¡ˆ Cï¼š</strong>å–®ä¸€ SRS + å¤šå€‹ FFmpeg ç¯€é» (å»ºè­°åˆæœŸä½¿ç”¨)</li>
                    </ul>
                </div>

                <h3>ğŸ’° æˆæœ¬æœ€ä½³åŒ–å»ºè­°</h3>
                <div class="success-box">
                    <h4>ğŸ’¡ ä½¿ç”¨ Fargate Spot ç¯€çœ 70% æˆæœ¬</h4>
                    <ul>
                        <li><strong>é©ç”¨æ–¼ï¼š</strong>FFmpeg Tasks (å¯å®¹å¿å¶çˆ¾ä¸­æ–·)</li>
                        <li><strong>ä¸é©ç”¨æ–¼ï¼š</strong>SRS å’Œ Laravel (éœ€è¦ç©©å®šé‹è¡Œ)</li>
                        <li><strong>è¨­å®šæ–¹å¼ï¼š</strong>åœ¨ RunTask API æŒ‡å®š FARGATE_SPOT capacity provider</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- å®Œæ•´æµç¨‹ Tab -->
        <div id="flow" class="tab-content">
            <div class="diagram-section">
                <h2>ğŸ”„ å®Œæ•´ç›´æ’­æµç¨‹æ™‚åºåœ–</h2>

                <h3>Phase 1: ç›´æ’­æº–å‚™éšæ®µ</h3>
                <pre class="mermaid">
sequenceDiagram
    participant App
    participant Laravel
    participant YT as YouTube
    participant FB as Facebook
    participant DB

    App->>Laravel: POST /api/streams/create
    Laravel->>YT: Create Broadcast
    YT-->>Laravel: ingest_url + key
    Laravel->>FB: Create Live Video
    FB-->>Laravel: ingest_url + key
    Laravel->>DB: Save Session
    Laravel-->>App: rtmp_url + stream_key
                </pre>

                <h3>Phase 2: æ¨æµå•Ÿå‹•éšæ®µ</h3>
                <pre class="mermaid">
sequenceDiagram
    participant App
    participant SRS
    participant Laravel
    participant Worker
    participant FFmpeg

    App->>SRS: Push RTMP stream
    SRS->>Laravel: Webhook: on_publish
    Laravel->>Laravel: Verify + Update status
    Laravel->>Worker: dispatch Job
    Laravel-->>SRS: 200 OK
    Worker->>FFmpeg: Start FFmpeg
    FFmpeg->>SRS: Pull stream from SRS
    FFmpeg->>Platforms: Push to platforms
                </pre>

                <h3>Phase 3: ç›´æ’­çµæŸéšæ®µ</h3>
                <pre class="mermaid">
sequenceDiagram
    participant App
    participant SRS
    participant Laravel
    participant FFmpeg
    participant DB

    App->>SRS: Stop streaming
    SRS->>Laravel: Webhook: on_unpublish
    Laravel->>FFmpeg: Stop FFmpeg
    Laravel->>DB: Update status=ENDED
    Laravel-->>App: StreamEndedEvent
                </pre>
            </div>
        </div>

        <!-- è³‡æ–™åº«è¨­è¨ˆ Tab -->
        <div id="database" class="tab-content">
            <div class="diagram-section">
                <h2>ğŸ’¾ è³‡æ–™åº«è¨­è¨ˆ</h2>

                <h3>ğŸ“‹ live_sessions è¡¨</h3>
                <table>
                    <thead>
                        <tr>
                            <th>æ¬„ä½åç¨±</th>
                            <th>å‹åˆ¥</th>
                            <th>èªªæ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>id</code></td>
                            <td>BIGINT PK</td>
                            <td>ä¸»éµ</td>
                        </tr>
                        <tr>
                            <td><code>internal_stream_key</code></td>
                            <td>VARCHAR(100) UNIQUE</td>
                            <td>å…§éƒ¨ stream keyï¼Œå¦‚ï¼šuser123_abc456</td>
                        </tr>
                        <tr>
                            <td><code>user_id</code></td>
                            <td>BIGINT</td>
                            <td>é—œè¯åˆ° users è¡¨</td>
                        </tr>
                        <tr>
                            <td><code>youtube_ingest_url</code></td>
                            <td>TEXT</td>
                            <td>YouTube RTMPS URL</td>
                        </tr>
                        <tr>
                            <td><code>youtube_stream_key</code></td>
                            <td>VARCHAR(255)</td>
                            <td>YouTube stream key</td>
                        </tr>
                        <tr>
                            <td><code>facebook_ingest_url</code></td>
                            <td>TEXT</td>
                            <td>Facebook RTMPS URL</td>
                        </tr>
                        <tr>
                            <td><code>facebook_stream_key</code></td>
                            <td>VARCHAR(255)</td>
                            <td>Facebook stream key</td>
                        </tr>
                        <tr>
                            <td><code>status</code></td>
                            <td>ENUM</td>
                            <td>READY / STARTING / PUBLISHING / ENDED / FAILED</td>
                        </tr>
                        <tr>
                            <td><code>ffmpeg_container_id</code></td>
                            <td>VARCHAR(255)</td>
                            <td>FFmpeg å®¹å™¨ ID (Docker) æˆ– Task ARN (ECS)</td>
                        </tr>
                        <tr>
                            <td><code>started_at</code></td>
                            <td>TIMESTAMP</td>
                            <td>ç›´æ’­é–‹å§‹æ™‚é–“</td>
                        </tr>
                        <tr>
                            <td><code>ended_at</code></td>
                            <td>TIMESTAMP</td>
                            <td>ç›´æ’­çµæŸæ™‚é–“</td>
                        </tr>
                    </tbody>
                </table>

                <h3>ğŸ”‘ ç´¢å¼•è¨­è¨ˆ</h3>
                <pre class="code-block">CREATE INDEX idx_stream_key ON live_sessions(internal_stream_key);
CREATE INDEX idx_user_status ON live_sessions(user_id, status);
CREATE INDEX idx_started_at ON live_sessions(started_at);
                </pre>

                <h3>ğŸ“Š ç‹€æ…‹æµè½‰åœ–</h3>
                <pre class="mermaid">
stateDiagram-v2
    [*] --> READY
    READY --> STARTING: on_publish
    STARTING --> PUBLISHING: FFmpeg started
    STARTING --> FAILED: Start failed
    PUBLISHING --> ENDED: on_unpublish
    PUBLISHING --> FAILED: Error
    ENDED --> [*]
    FAILED --> [*]
                </pre>
            </div>
        </div>

        <!-- ç³»çµ±å±¤è¨­è¨ˆ Tab -->
        <div id="system" class="tab-content">
            <div class="diagram-section">
                <h2>âš™ï¸ ç³»çµ±å±¤è¨­è¨ˆï¼ˆéåŠŸèƒ½éœ€æ±‚ï¼‰</h2>

                <div class="info-box">
                    <h4>ğŸ’¡ ä»€éº¼æ˜¯ç³»çµ±å±¤ï¼Ÿ</h4>
                    <p>ç³»çµ±å±¤è¨­è¨ˆé—œæ³¨çš„æ˜¯ã€ŒéåŠŸèƒ½éœ€æ±‚ã€ï¼Œä¸æ˜¯å…·é«”æ¥­å‹™é‚è¼¯ï¼Œè€Œæ˜¯ç³»çµ±æ•´é«”çš„å“è³ªå±¬æ€§ï¼ŒåŒ…æ‹¬ï¼š</p>
                    <ul>
                        <li><strong>å³æ™‚æ€§ï¼ˆReal-timeï¼‰ï¼š</strong>è¨Šæ¯æ”¶å–®ã€WebSocket æ¨é€çš„å»¶é²è¦æ±‚</li>
                        <li><strong>å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰ï¼š</strong>ç³»çµ±æ­£å¸¸é‹è¡Œæ™‚é–“ã€å®¹éŒ¯èƒ½åŠ›</li>
                        <li><strong>å¯æ“´å±•æ€§ï¼ˆScalabilityï¼‰ï¼š</strong>æ°´å¹³æ“´å±•ã€æ‡‰å°æµé‡æ¿€å¢</li>
                        <li><strong>å®‰å…¨æ€§ï¼ˆSecurityï¼‰ï¼š</strong>èªè­‰æˆæ¬Šã€è³‡æ–™åŠ å¯†ã€é˜²è­·æ”»æ“Š</li>
                        <li><strong>å¯è§€æ¸¬æ€§ï¼ˆObservabilityï¼‰ï¼š</strong>æ—¥èªŒã€ç›£æ§ã€è¿½è¹¤ã€å‘Šè­¦</li>
                    </ul>
                </div>

                <h3>âš¡ å³æ™‚æ€§è¨­è¨ˆ</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>ğŸ”„ API Polling ç­–ç•¥</h4>
                        <p><strong>ç›®æ¨™ï¼š</strong>2-5 ç§’å…§æ‹¿åˆ°æ–°ç•™è¨€</p>
                        <ul>
                            <li>è¼ªè©¢é–“éš”ï¼š2-5 ç§’ï¼ˆå¯ä¾å¹³å°èª¿æ•´ï¼‰</li>
                            <li>æŒ‡æ•¸é€€é¿ï¼šç„¡ç•™è¨€æ™‚é€æ¼¸é™ä½é »ç‡</li>
                            <li>é€Ÿç‡é™åˆ¶ï¼šé¿å…è¶…éå¹³å° API Quota</li>
                            <li>ä¸¦ç™¼æ§åˆ¶ï¼šå¤šå ´ç›´æ’­ä¸¦ç™¼æ‹‰å–</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>ğŸ“¡ WebSocket æ¨é€</h4>
                        <p><strong>ç›®æ¨™ï¼š</strong>< 500ms æ¨é€å»¶é²</p>
                        <ul>
                            <li>é•·é€£ç·šç¶­æŒï¼šå¿ƒè·³æ©Ÿåˆ¶ï¼ˆ30 ç§’ï¼‰</li>
                            <li>æ–·ç·šé‡é€£ï¼šæŒ‡æ•¸é€€é¿é‡é€£</li>
                            <li>è¨Šæ¯ç¢ºèªï¼šACK æ©Ÿåˆ¶ç¢ºä¿é€é”</li>
                            <li>æˆ¿é–“éš”é›¢ï¼šæ¯å ´ç›´æ’­ç¨ç«‹æˆ¿é–“</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>ğŸš€ Event Bus æ•ˆèƒ½</h4>
                        <p><strong>ç›®æ¨™ï¼š</strong>< 100ms äº‹ä»¶å‚³é</p>
                        <ul>
                            <li>Redis Streamsï¼šåˆæœŸè¶³å¤ ï¼ˆ< 1 è¬ TPSï¼‰</li>
                            <li>RabbitMQï¼šæˆé•·æœŸï¼ˆ< 10 è¬ TPSï¼‰</li>
                            <li>Kafkaï¼šå¤§è¦æ¨¡ï¼ˆ> 10 è¬ TPSï¼‰</li>
                            <li>æ¶ˆè²»è€…ç¾¤çµ„ï¼šæ°´å¹³æ“´å±•æ¶ˆè²»èƒ½åŠ›</li>
                        </ul>
                    </div>
                </div>

                <h3>ğŸ›¡ï¸ å¯ç”¨æ€§èˆ‡å®¹éŒ¯</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>ğŸ¥ å¥åº·æª¢æŸ¥</h4>
                        <ul>
                            <li><strong>Liveness Probeï¼š</strong>æœå‹™æ˜¯å¦å­˜æ´»</li>
                            <li><strong>Readiness Probeï¼š</strong>æ˜¯å¦æº–å‚™å¥½æ¥æ”¶æµé‡</li>
                            <li><strong>æª¢æŸ¥ç«¯é»ï¼š</strong>GET /health å›å‚³ 200 OK</li>
                            <li><strong>æª¢æŸ¥é …ç›®ï¼š</strong>è³‡æ–™åº«ã€Redisã€Event Bus é€£ç·š</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>ğŸ”„ æ•…éšœæ¢å¾©</h4>
                        <ul>
                            <li><strong>è‡ªå‹•é‡å•Ÿï¼š</strong>å®¹å™¨ç•°å¸¸æ™‚è‡ªå‹•é‡å•Ÿ</li>
                            <li><strong>å„ªé›…é—œé–‰ï¼š</strong>SIGTERM ä¿¡è™Ÿè™•ç†ï¼Œå®Œæˆç•¶å‰è«‹æ±‚</li>
                            <li><strong>Circuit Breakerï¼š</strong>å¤–éƒ¨ API å¤±æ•—æ™‚ç†”æ–·</li>
                            <li><strong>é‡è©¦æ©Ÿåˆ¶ï¼š</strong>æŒ‡æ•¸é€€é¿é‡è©¦ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>ğŸ’¾ è³‡æ–™å‚™ä»½</h4>
                        <ul>
                            <li><strong>è³‡æ–™åº«å‚™ä»½ï¼š</strong>æ¯æ—¥å…¨é‡ + æ¯å°æ™‚å¢é‡</li>
                            <li><strong>ä¿ç•™ç­–ç•¥ï¼š</strong>30 å¤©å…§å¯æ¢å¾©ä»»æ„æ™‚é–“é»</li>
                            <li><strong>ç•°åœ°å‚™ä»½ï¼š</strong>å‚™ä»½æª”æ¡ˆå­˜è‡³ S3ï¼ˆè·¨å€åŸŸï¼‰</li>
                            <li><strong>å®šæœŸæ¼”ç·´ï¼š</strong>æ¯å­£æ¸¬è©¦å‚™ä»½æ¢å¾©æµç¨‹</li>
                        </ul>
                    </div>
                </div>

                <h3>ğŸ“ˆ å¯æ“´å±•æ€§è¨­è¨ˆ</h3>
                <div class="success-box">
                    <h4>âœ… æ°´å¹³æ“´å±•ç­–ç•¥</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>çµ„ä»¶</th>
                                <th>æ“´å±•è§¸ç™¼æ¢ä»¶</th>
                                <th>æ“´å±•æ–¹å¼</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Laravel Octane</strong></td>
                                <td>CPU > 70%</td>
                                <td>Auto Scaling (2-10 Tasks)</td>
                            </tr>
                            <tr>
                                <td><strong>WebSocket Server</strong></td>
                                <td>é€£ç·šæ•¸ > 5000/å¯¦ä¾‹</td>
                                <td>Auto Scaling (æ°´å¹³æ“´å±•)</td>
                            </tr>
                            <tr>
                                <td><strong>Platform Connectors</strong></td>
                                <td>ç›´æ’­å ´æ¬¡ > 50 å ´</td>
                                <td>å¢åŠ å¯¦ä¾‹ï¼ˆæ¯å¯¦ä¾‹è™•ç† 50 å ´ï¼‰</td>
                            </tr>
                            <tr>
                                <td><strong>FFmpeg Tasks</strong></td>
                                <td>æ¯å ´ç›´æ’­ 1 å€‹ Task</td>
                                <td>æŒ‰éœ€å•Ÿå‹•ï¼ˆRunTaskï¼‰</td>
                            </tr>
                            <tr>
                                <td><strong>è³‡æ–™åº«</strong></td>
                                <td>é€£ç·šæ•¸ > 80%</td>
                                <td>è®€å¯«åˆ†é›¢ + Read Replicas</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="info-box">
                    <h4>ğŸ’¡ ç„¡ç‹€æ…‹è¨­è¨ˆåŸå‰‡</h4>
                    <ul>
                        <li><strong>Session å¤–éƒ¨åŒ–ï¼š</strong>ä½¿ç”¨ Redis å„²å­˜ Sessionï¼Œä¸å­˜åœ¨æ‡‰ç”¨ç¨‹å¼è¨˜æ†¶é«”</li>
                        <li><strong>æª”æ¡ˆä¸Šå‚³ï¼š</strong>ç›´æ¥ä¸Šå‚³åˆ° S3/OSSï¼Œä¸ç¶“éæ‡‰ç”¨ä¼ºæœå™¨</li>
                        <li><strong>WebSocket æˆ¿é–“ï¼š</strong>æˆ¿é–“è³‡è¨Šå­˜ Redisï¼Œä»»ä¸€å¯¦ä¾‹éƒ½å¯è™•ç†</li>
                        <li><strong>FFmpeg ç‹€æ…‹ï¼š</strong>ç‹€æ…‹å¯«å…¥è³‡æ–™åº«ï¼Œä¸ä¾è³´ç‰¹å®šç¯€é»</li>
                    </ul>
                </div>

                <h3>ğŸ”’ å®‰å…¨æ€§è¨­è¨ˆ</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>ğŸ” èªè­‰èˆ‡æˆæ¬Š</h4>
                        <ul>
                            <li><strong>JWT Tokenï¼š</strong>API èªè­‰ï¼ˆçŸ­æœŸ Token + Refresh Tokenï¼‰</li>
                            <li><strong>RBACï¼š</strong>è§’è‰²æ¬Šé™ç®¡ç†ï¼ˆLaravel Policyï¼‰</li>
                            <li><strong>API Keyï¼š</strong>ç¬¬ä¸‰æ–¹æ•´åˆä½¿ç”¨ API Key</li>
                            <li><strong>OAuth 2.0ï¼š</strong>FB/YouTube å¹³å°æˆæ¬Š</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>ğŸ›¡ï¸ è³‡æ–™åŠ å¯†</h4>
                        <ul>
                            <li><strong>å‚³è¼¸åŠ å¯†ï¼š</strong>HTTPS/TLS 1.3ï¼ˆå¼·åˆ¶ï¼‰</li>
                            <li><strong>è³‡æ–™åº«åŠ å¯†ï¼š</strong>æ•æ„Ÿæ¬„ä½ AES-256 åŠ å¯†</li>
                            <li><strong>ç’°å¢ƒè®Šæ•¸ï¼š</strong>æ©Ÿæ•è³‡è¨Šç”¨ AWS Secrets Manager</li>
                            <li><strong>RTMPSï¼š</strong>ç›´æ’­æ¨æµä½¿ç”¨åŠ å¯†å”è­°</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>ğŸš¨ å®‰å…¨é˜²è­·</h4>
                        <ul>
                            <li><strong>Rate Limitingï¼š</strong>API é€Ÿç‡é™åˆ¶ï¼ˆ100 req/minï¼‰</li>
                            <li><strong>CORS è¨­å®šï¼š</strong>é™åˆ¶ä¾†æºåŸŸå</li>
                            <li><strong>XSS é˜²è­·ï¼š</strong>è¼¸å…¥é©—è­‰ + CSP Header</li>
                            <li><strong>SQL Injectionï¼š</strong>ORM + Prepared Statements</li>
                            <li><strong>DDoS é˜²è­·ï¼š</strong>CloudFlare / AWS Shield</li>
                        </ul>
                    </div>
                </div>

                <h3>ğŸ“Š å¯è§€æ¸¬æ€§ï¼ˆObservabilityï¼‰</h3>
                <div class="info-box">
                    <h4>ğŸ” ä¸‰å¤§æ”¯æŸ±ï¼šLogsã€Metricsã€Traces</h4>
                </div>

                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>ğŸ“ æ—¥èªŒï¼ˆLogsï¼‰</h4>
                        <ul>
                            <li><strong>çµæ§‹åŒ–æ—¥èªŒï¼š</strong>JSON æ ¼å¼ï¼ˆæ–¹ä¾¿è§£æï¼‰</li>
                            <li><strong>æ—¥èªŒç­‰ç´šï¼š</strong>DEBUG / INFO / WARNING / ERROR</li>
                            <li><strong>é›†ä¸­ç®¡ç†ï¼š</strong>ELK Stack æˆ– CloudWatch Logs</li>
                            <li><strong>é—œéµäº‹ä»¶ï¼š</strong>è¨‚å–®å»ºç«‹ã€ä»˜æ¬¾ã€æ¨æµå•Ÿå‹•</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>ğŸ“ˆ æŒ‡æ¨™ï¼ˆMetricsï¼‰</h4>
                        <ul>
                            <li><strong>ç³»çµ±æŒ‡æ¨™ï¼š</strong>CPUã€è¨˜æ†¶é«”ã€ç¶²è·¯ã€ç£ç¢Ÿ</li>
                            <li><strong>æ‡‰ç”¨æŒ‡æ¨™ï¼š</strong>Request Rateã€Error Rateã€Latency</li>
                            <li><strong>æ¥­å‹™æŒ‡æ¨™ï¼š</strong>ç›´æ’­å ´æ¬¡ã€è¨‚å–®æ•¸ã€GMV</li>
                            <li><strong>å·¥å…·ï¼š</strong>Prometheus + Grafana æˆ– CloudWatch</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>ğŸ”— è¿½è¹¤ï¼ˆTracesï¼‰</h4>
                        <ul>
                            <li><strong>åˆ†æ•£å¼è¿½è¹¤ï¼š</strong>è¿½è¹¤è·¨æœå‹™è«‹æ±‚æµç¨‹</li>
                            <li><strong>Trace IDï¼š</strong>æ¯å€‹è«‹æ±‚å”¯ä¸€ ID</li>
                            <li><strong>Spanï¼š</strong>è¨˜éŒ„æ¯å€‹æ“ä½œè€—æ™‚</li>
                            <li><strong>å·¥å…·ï¼š</strong>Jaegerã€AWS X-Ray</li>
                        </ul>
                    </div>
                </div>

                <h3>ğŸš¨ ç›£æ§å‘Šè­¦ç­–ç•¥</h3>
                <table>
                    <thead>
                        <tr>
                            <th>å‘Šè­¦é …ç›®</th>
                            <th>è§¸ç™¼æ¢ä»¶</th>
                            <th>åš´é‡ç¨‹åº¦</th>
                            <th>é€šçŸ¥æ–¹å¼</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>æœå‹™ç„¡å›æ‡‰</strong></td>
                            <td>Health Check é€£çºŒå¤±æ•— 3 æ¬¡</td>
                            <td>ğŸ”´ Critical</td>
                            <td>é›»è©± + SMS + Email</td>
                        </tr>
                        <tr>
                            <td><strong>éŒ¯èª¤ç‡éé«˜</strong></td>
                            <td>Error Rate > 5% (æŒçºŒ 5 åˆ†é˜)</td>
                            <td>ğŸŸ  High</td>
                            <td>SMS + Email</td>
                        </tr>
                        <tr>
                            <td><strong>å›æ‡‰æ™‚é–“éæ…¢</strong></td>
                            <td>P95 Latency > 2s (æŒçºŒ 10 åˆ†é˜)</td>
                            <td>ğŸŸ¡ Medium</td>
                            <td>Email + Slack</td>
                        </tr>
                        <tr>
                            <td><strong>è³‡æ–™åº«é€£ç·šæ± æ»¿</strong></td>
                            <td>DB Connections > 90%</td>
                            <td>ğŸŸ  High</td>
                            <td>SMS + Email</td>
                        </tr>
                        <tr>
                            <td><strong>ç£ç¢Ÿç©ºé–“ä¸è¶³</strong></td>
                            <td>Disk Usage > 85%</td>
                            <td>ğŸŸ¡ Medium</td>
                            <td>Email + Slack</td>
                        </tr>
                        <tr>
                            <td><strong>FFmpeg å•Ÿå‹•å¤±æ•—</strong></td>
                            <td>å•Ÿå‹•å¤±æ•—ï¼ˆå½±éŸ¿ç›´æ’­ï¼‰</td>
                            <td>ğŸ”´ Critical</td>
                            <td>é›»è©± + SMS + Email</td>
                        </tr>
                    </tbody>
                </table>

                <div class="warning-box">
                    <h4>âš ï¸ å‘Šè­¦ç–²å‹ï¼ˆAlert Fatigueï¼‰é˜²ç¯„</h4>
                    <ul>
                        <li><strong>åˆç†é–¾å€¼ï¼š</strong>é¿å…éæ–¼æ•æ„Ÿçš„å‘Šè­¦æ¢ä»¶</li>
                        <li><strong>èšåˆå‘Šè­¦ï¼š</strong>åŒé¡å‹å‘Šè­¦åœ¨çŸ­æ™‚é–“å…§åªç™¼ä¸€æ¬¡</li>
                        <li><strong>å‘Šè­¦åˆ†ç´šï¼š</strong>Critical/High/Mediumï¼Œä¸åŒç´šåˆ¥ä¸åŒé€šçŸ¥æ–¹å¼</li>
                        <li><strong>å®šæœŸæª¢è¨ï¼š</strong>æ¯æœˆæª¢è¦–å‘Šè­¦æœ‰æ•ˆæ€§ï¼Œèª¿æ•´é–¾å€¼</li>
                    </ul>
                </div>

                <h3>ğŸ”§ æŠ€è¡“å¯¦ç¾å·¥å…·é¸æ“‡</h3>
                <table>
                    <thead>
                        <tr>
                            <th>é¢å‘</th>
                            <th>è‡ªæ¶æ–¹æ¡ˆ</th>
                            <th>AWS é›²ç«¯æ–¹æ¡ˆ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>æ—¥èªŒç®¡ç†</strong></td>
                            <td>ELK Stack (Elasticsearch + Logstash + Kibana)</td>
                            <td>CloudWatch Logs + CloudWatch Insights</td>
                        </tr>
                        <tr>
                            <td><strong>æŒ‡æ¨™ç›£æ§</strong></td>
                            <td>Prometheus + Grafana</td>
                            <td>CloudWatch Metrics + Grafana</td>
                        </tr>
                        <tr>
                            <td><strong>åˆ†æ•£å¼è¿½è¹¤</strong></td>
                            <td>Jaeger</td>
                            <td>AWS X-Ray</td>
                        </tr>
                        <tr>
                            <td><strong>å‘Šè­¦é€šçŸ¥</strong></td>
                            <td>Alertmanager + PagerDuty</td>
                            <td>CloudWatch Alarms + SNS</td>
                        </tr>
                        <tr>
                            <td><strong>APM</strong></td>
                            <td>è‡ªå»ºï¼ˆPrometheus + Jaegerï¼‰</td>
                            <td>AWS X-Ray + CloudWatch Application Insights</td>
                        </tr>
                    </tbody>
                </table>

                <div class="success-box">
                    <h4>âœ… ç³»çµ±å±¤è¨­è¨ˆæª¢æŸ¥æ¸…å–®</h4>
                    <ul>
                        <li>âœ… <strong>å³æ™‚æ€§ï¼š</strong>API Polling 2-5 ç§’ã€WebSocket æ¨é€ < 500msã€Event Bus < 100ms</li>
                        <li>âœ… <strong>å¯ç”¨æ€§ï¼š</strong>Health Checkã€è‡ªå‹•é‡å•Ÿã€Circuit Breakerã€è³‡æ–™å‚™ä»½</li>
                        <li>âœ… <strong>å¯æ“´å±•æ€§ï¼š</strong>æ°´å¹³æ“´å±•ã€Auto Scalingã€ç„¡ç‹€æ…‹è¨­è¨ˆã€è®€å¯«åˆ†é›¢</li>
                        <li>âœ… <strong>å®‰å…¨æ€§ï¼š</strong>JWT èªè­‰ã€RBAC æˆæ¬Šã€HTTPSã€è³‡æ–™åŠ å¯†ã€Rate Limiting</li>
                        <li>âœ… <strong>å¯è§€æ¸¬æ€§ï¼š</strong>çµæ§‹åŒ–æ—¥èªŒã€æŒ‡æ¨™ç›£æ§ã€åˆ†æ•£å¼è¿½è¹¤ã€å‘Šè­¦ç­–ç•¥</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- æ–¹æ¡ˆæ¯”è¼ƒ Tab -->
        <div id="comparison" class="tab-content">
            <div class="diagram-section">
                <h2>âš–ï¸ è‡ªæ¶ vs ECS æ–¹æ¡ˆæ¯”è¼ƒ</h2>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>æ¯”è¼ƒé …ç›®</th>
                            <th>è‡ªæ¶ Docker ç‰ˆæœ¬</th>
                            <th>AWS ECS ç‰ˆæœ¬</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>åˆæœŸæˆæœ¬</strong></td>
                            <td><span class="pros">âœ“ ä½</span><br/>VPS $20-100/æœˆ</td>
                            <td><span class="cons">âœ— è¼ƒé«˜</span><br/>$200-500/æœˆèµ·</td>
                        </tr>
                        <tr>
                            <td><strong>æ“´å……æ€§</strong></td>
                            <td><span class="cons">âœ— æœ‰é™</span><br/>å—å–®æ©Ÿç¡¬é«”é™åˆ¶</td>
                            <td><span class="pros">âœ“ å„ªç•°</span><br/>è‡ªå‹•æ“´å……ç¸®æ¸›</td>
                        </tr>
                        <tr>
                            <td><strong>é«˜å¯ç”¨æ€§</strong></td>
                            <td><span class="cons">âœ— å–®é»æ•…éšœ</span><br/>éœ€è‡ªè¡Œè¨­å®šå‚™æ´</td>
                            <td><span class="pros">âœ“ å…§å»º</span><br/>è‡ªå‹•å®¹éŒ¯ç§»è½‰</td>
                        </tr>
                        <tr>
                            <td><strong>ç¶­è­·æˆæœ¬</strong></td>
                            <td><span class="cons">âœ— é«˜</span><br/>éœ€æ‰‹å‹•æ›´æ–°ç¶­è­·</td>
                            <td><span class="pros">âœ“ ä½</span><br/>AWS ç®¡ç†åŸºç¤è¨­æ–½</td>
                        </tr>
                        <tr>
                            <td><strong>å­¸ç¿’æ›²ç·š</strong></td>
                            <td><span class="pros">âœ“ ç°¡å–®</span><br/>Docker Compose å³å¯</td>
                            <td><span class="cons">âœ— è¤‡é›œ</span><br/>éœ€äº†è§£ AWS æœå‹™</td>
                        </tr>
                        <tr>
                            <td><strong>ç›£æ§å‘Šè­¦</strong></td>
                            <td><span class="cons">âœ— éœ€è‡ªå»º</span><br/>éœ€æ•´åˆç¬¬ä¸‰æ–¹å·¥å…·</td>
                            <td><span class="pros">âœ“ å®Œæ•´</span><br/>CloudWatch å…§å»º</td>
                        </tr>
                        <tr>
                            <td><strong>é©åˆè¦æ¨¡</strong></td>
                            <td>< 50 å ´åŒæ™‚åœ¨ç·š</td>
                            <td>> 50 å ´åŒæ™‚åœ¨ç·š</td>
                        </tr>
                    </tbody>
                </table>

                <h3>ğŸ’¡ å»ºè­°ç­–ç•¥</h3>
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>ğŸ åˆæœŸéšæ®µ (MVP)</h4>
                        <ul>
                            <li><strong>é¸æ“‡ï¼š</strong>è‡ªæ¶ Docker ç‰ˆæœ¬</li>
                            <li><strong>åŸå› ï¼š</strong>å¿«é€Ÿé©—è­‰åŠŸèƒ½ï¼Œæˆæœ¬ä½</li>
                            <li><strong>ä¸»æ©Ÿï¼š</strong>Linode/DigitalOcean $40/æœˆ</li>
                            <li><strong>è¦æ ¼ï¼š</strong>4 Core / 8GB RAM</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>ğŸ“ˆ æˆé•·éšæ®µ</h4>
                        <ul>
                            <li><strong>é¸æ“‡ï¼š</strong>æ··åˆæ¶æ§‹</li>
                            <li><strong>ç­–ç•¥ï¼š</strong>SRS/Laravel è‡ªæ¶ï¼ŒFFmpeg ç”¨ ECS Fargate Spot</li>
                            <li><strong>åŸå› ï¼š</strong>å¹³è¡¡æˆæœ¬èˆ‡æ“´å……æ€§</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <h4>ğŸš€ æˆç†Ÿéšæ®µ</h4>
                        <ul>
                            <li><strong>é¸æ“‡ï¼š</strong>å®Œæ•´ AWS ECS</li>
                            <li><strong>åŸå› ï¼š</strong>éœ€è¦é«˜å¯ç”¨æ€§èˆ‡å…¨çƒéƒ¨ç½²</li>
                            <li><strong>æ­é…ï¼š</strong>å¤šå€åŸŸ + CDN</li>
                        </ul>
                    </div>
                </div>

                <h3>ğŸ’° æˆæœ¬ä¼°ç®— (æ¯æœˆ)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>é …ç›®</th>
                            <th>è‡ªæ¶ Docker</th>
                            <th>AWS ECS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ä¸»æ©Ÿ/é‹ç®—</td>
                            <td>$40</td>
                            <td>$200-500</td>
                        </tr>
                        <tr>
                            <td>è³‡æ–™åº«</td>
                            <td>$0 (è‡ªæ¶)</td>
                            <td>$50-150 (RDS)</td>
                        </tr>
                        <tr>
                            <td>å¿«å–</td>
                            <td>$0 (è‡ªæ¶)</td>
                            <td>$30-80 (ElastiCache)</td>
                        </tr>
                        <tr>
                            <td>è² è¼‰å¹³è¡¡</td>
                            <td>$0 (Nginx)</td>
                            <td>$20-40 (ALB/NLB)</td>
                        </tr>
                        <tr>
                            <td>é »å¯¬</td>
                            <td>$20-100</td>
                            <td>$50-200</td>
                        </tr>
                        <tr>
                            <td><strong>ç¸½è¨ˆ</strong></td>
                            <td><strong>$60-140</strong></td>
                            <td><strong>$350-970</strong></td>
                        </tr>
                    </tbody>
                </table>

                <div class="info-box">
                    <h4>ğŸ“ å‚™è¨»</h4>
                    <ul>
                        <li>ä»¥ä¸Šæˆæœ¬ç‚ºæ¯æœˆ 20-50 å ´ä¸¦ç™¼ç›´æ’­çš„ä¼°ç®—</li>
                        <li>å¯¦éš›æˆæœ¬ä¾ä½¿ç”¨é‡ã€å€åŸŸã€æµé‡è€Œç•°</li>
                        <li>ECS ä½¿ç”¨ Fargate Spot å¯ç¯€çœ 50-70% é‹ç®—æˆæœ¬</li>
                        <li>å¹³å° API å‘¼å«è²»ç”¨æœªè¨ˆå…¥ (é€šå¸¸å…è²»æˆ–æ¥µä½)</li>
                    </ul>
                </div>
            </div>
        </div>

        <footer>
            <p><strong>ğŸ“ myanStream æ¶æ§‹æ–‡ä»¶</strong></p>
            <p>ç‰ˆæœ¬: 1.0.0 | æœ€å¾Œæ›´æ–°: <span id="lastUpdate"></span></p>
            <p><a href="../index.html" style="color: #667eea; text-decoration: none;">è¿”å›å°ˆæ¡ˆåˆ—è¡¨ â†’</a></p>
        </footer>
    </div>

    <script>
        // è¨­å®š Mermaid é…ç½®ï¼ˆæ”¹ç‚ºæ‰‹å‹•å•Ÿå‹•ï¼‰
        mermaid.initialize({
            startOnLoad: false,
            theme: 'default',
            securityLevel: 'loose',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });

        // Tab åˆ‡æ›å‡½æ•¸
        function showTab(tabName, tabButton) {
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => {
                content.classList.remove('active');
            });

            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });

            document.getElementById(tabName).classList.add('active');
            if (tabButton) {
                tabButton.classList.add('active');
            }

            // å¼·åˆ¶é‡æ–°æ¸²æŸ“ Mermaid åœ–è¡¨
            setTimeout(function() {
                mermaid.init(undefined, document.querySelectorAll('#' + tabName + ' .mermaid'));
            }, 100);
        }

        // é é¢è¼‰å…¥æ™‚åŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            // è¨­å®šæ—¥æœŸ
            document.getElementById('lastUpdate').textContent = new Date().toLocaleDateString('zh-TW');

            // åˆå§‹æ¸²æŸ“é è¨­ Tab çš„ Mermaid åœ–
            mermaid.init(undefined, document.querySelectorAll('#overview .mermaid'));

            // æ·¡å…¥å‹•ç•«
            const container = document.querySelector('.container');
            container.style.opacity = '0';
            container.style.transform = 'translateY(20px)';

            setTimeout(() => {
                container.style.transition = 'all 0.6s ease';
                container.style.opacity = '1';
                container.style.transform = 'translateY(0)';
            }, 100);
        });
    </script>
</body>
</html>
